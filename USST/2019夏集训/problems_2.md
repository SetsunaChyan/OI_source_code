### p23_1. Ranka with Matrix (easy version)

**能通过G2的代码并不一定能通过此题，请仔细阅读数据范围。**

给定一个 $R \times C$ 的矩阵，行从上往下被标记为 $1 \cdots R$，列从左往右被标记为 $1 \cdots C$ 。现在有 $Q$ 个询问，每次询问在以左上角为 $(x_1,y_1)$ 且右下角为 $(x_2,y_2)$ 的子矩阵中选取若干个数(每个位置的数只能被选取一次)，使其和大于等于给定的值 $k$ ，最少要选几个数。特殊地，如果无论选几个都不能满足要求则输出 $-1$。

第一行三个正整数 $R,C,Q$。

接下来一个 $R$ 行 $C$ 列的矩阵，表示矩阵内的元素 $A_{i,j}(1 \leq A_{i,j} \leq 1000)$。

接下来 $Q$ 行，每行 $5$ 个正整数 $x_1,y_1,x_2,y_2,k(1 \leq x_1 \leq x_2 \leq R,1 \leq y_1 \leq y_2 \leq C,1 \leq k \leq 2 \times 10^9)$ 。

对于此题，约定 $1 \leq R,C \leq 200;1 \leq Q \leq 2 \times 10^5$ 。

对于每个询问，输出一行一个答案。




### p23_2. Ranka with Matrix (medium version)

**能通过G3的代码并不一定能通过此题，请仔细阅读数据范围。**

给定一个 $R \times C$ 的矩阵，行从上往下被标记为 $1 \cdots R$，列从左往右被标记为 $1 \cdots C$ 。现在有 $Q$ 个询问，每次询问在以左上角为 $(x_1,y_1)$ 且右下角为 $(x_2,y_2)$ 的子矩阵中选取若干个数(每个位置的数只能被选取一次)，使其和大于等于给定的值 $k$ ，最少要选几个数。特殊地，如果无论选几个都不能满足要求则输出 $-1$。

第一行三个正整数 $R,C,Q$。

接下来一个 $R$ 行 $C$ 列的矩阵，表示矩阵内的元素 $A_{i,j}(1 \leq A_{i,j} \leq 1000)$。

接下来 $Q$ 行，每行 $5$ 个正整数 $x_1,y_1,x_2,y_2,k(1 \leq x_1 \leq x_2 \leq R,1 \leq y_1 \leq y_2 \leq C,1 \leq k \leq 2 \times 10^9)$ 。

对于此题，约定 $R=1;1 \leq C \leq 500000;1 \leq Q \leq 20000$ 。

对于每个询问，输出一行一个答案。




### p24_1. Ranka with Substring (easy version)

**这题与H3的唯一区别在于 $n=1$ 恒成立，这意味着您可以使用可以通过H3的代码通过此题。**

给定一个字符串 $s$ 和 $n$ 个 $s$ 的**连续**子串 $t_i$ 。对于每个 $t_i$ (即每个询问都是独立的)，你可以最多删去 $s$ 的一个**连续**子串，使 $t_i$ 仍然是 $s$ 的一个**连续**子串，求最多可以删去多少个字符。

$t[1 \cdots len_t]$ 是 $s[1 \cdots len_s]$ 的连续子串当且仅当存在一个下标 $l \in [1,len_s-len_t+1]$ 使得 $t[1 \cdots len_t]=s[l \cdots l+len_t-1]$ 。

第一行正整数 $n(1 \leq n)$ 。

第二行一个字符串 $s$。

接下来 $n$ 行，每行一个字符串 $t$ 。

输入保证 $|s|\leq 2 \times 10^5,\sum |t_i| \leq 2 \times 10^5$ ，且 $s,t$ 均由小写字母组成，且 $t$ 是 $s$ 的一个连续子串。

**对于此题，保证 $n=1$ 恒成立。**

对于每个询问，输出一行一个正整数表示答案。



### p24_2. Ranka with Substring (medium version 1)

给定一个字符串 $s$ 和一个 $s$ 的**子序列** $t$ 。你可以最多删去 $s$ 的一个**连续**子串，使 $t_i$ 仍然是 $s$ 的一个**子序列**，求最多可以删去多少个字符。

$t[1 \cdots len_t]$ 是 $s[1 \cdots len_s]$ 的连续子串当且仅当存在一个下标 $l \in [1,len_s-len_t+1]$ 使得 $t[1 \cdots len_t]=s[l \cdots l+len_t-1]$ 。

$t$ 是 $s$ 的一个子序列当且仅当 $t$ 中的每一个字符都以同样的顺序在 $s$ 中出现。例如，$abc$ 和 $axb$ 都是 $axbxcx$ 的子序列，但 $bca$ 不是。

第一行一个字符串 $s$。

第二行一个字符串 $t$ 。

输入保证 $|s|\leq 2 \times 10^5,|t| \leq 2 \times 10^5$ ，且 $s,t$ 均由小写字母组成，且 $t$ 是 $s$ 的一个子序列。

输出一个正整数表示答案。




### p24_3. Ranka with Substring (medium version 2)

给定一个字符串 $s$ 和 $n$ 个 $s$ 的**连续**子串 $t_i$ 。对于每个 $t_i$ (即每个询问都是独立的)，你可以最多删去 $s$ 的一个**连续**子串，使 $t_i$ 仍然是 $s$ 的一个**连续**子串，求最多可以删去多少个字符。

$t[1 \cdots len_t]$ 是 $s[1 \cdots len_s]$ 的连续子串当且仅当存在一个下标 $l \in [1,len_s-len_t+1]$ 使得 $t[1 \cdots len_t]=s[l \cdots l+len_t-1]$ 。

第一行正整数 $n(1 \leq n)$ 。

第二行一个字符串 $s$。

接下来 $n$ 行，每行一个字符串 $t$ 。

输入保证 $|s|\leq 2 \times 10^5,\sum |t_i| \leq 2 \times 10^5$ ，且 $s,t$ 均由小写字母组成，且 $t$ 是 $s$ 的一个连续子串。

对于每个询问，输出一行一个正整数表示答案。



### p25. Ranka with Normal Balance Magic

**这是一道板子题。**

您需要写一种数据结构（可参考题目标题），来维护一些数，其中需要提供以下操作：
1. 插入 $x$ 数
2. 删除 $x$ 数(若有多个相同的数，因只删除一个)
3. 查询 $x$ 数的排名(排名定义为比当前数小的数的个数 +$1$。若有多个相同的数，因输出最小的排名)
4. 查询排名为 $x$ 的数
5. 求 $x$ 的前驱(前驱定义为小于 $x$ ，且最大的数)
6. 求 $x$ 的后继(后继定义为大于 $x$ ，且最小的数)



$n \leq 100000$ 所有数字均在 $-10^7$ 到 $10^7$ 内。

第一行为 $n$ ，表示操作的个数，下面 $n$ 行每行有两个数 $opt$ 和 $x$，$opt$ 表示操作的序号 $(1\ leq opt \leq 6)$ 。

对于操作 $3,4,5,6$ 每行输出一个数，表示对应答案。



### p26. Ranka with LIS

从一个串中删除某些字符就可以得到的串称为原串的子序列。例如， $abc$ 和 $axx$ 都是 $axbxc$ 的子序列，但 $acb$ 不是。

最长不下降子序列是原串的某个元素单调不降且长度最长的子序列。

给你一个长度为 $n$ 的序列，设它的最长不下降子序列的长度为 $s$ 。求在每个元素只能取一次的情况下，最多能取出多少个长度为 $s$ 的不下降子序列。

第一行一个正整数 $n(1 \leq n \leq 500)$。

第二行 $n$ 个正整数 $a_i(1 \leq a_i \leq 10^8)$。

输出一行一个答案。



### p27. Ranka with Chtholly

末日时在做什么？有没有空？可以来 $AK$ 吗？

珂学家们最近发现，包含特定基因序列的基因片段会导致一种名为白学病的致命性病毒的扩散。剿灭白学家是珂学家们的共同使命！

珂学家们给你 $n$ 个字符串表示会导致白学病的基因序列。对于一个基因片段，如果存在至少一个白学病基因序列是它的**连续**子串，那么珂学家就会认为它是坏片段，相反，它就是一个好片段。珂学家们数数能力⑧太行，她们想知道，有多少个长度**恰好**为 $m$ 的基因片段是个好片段。

基因序列和基因片段都是仅包含 $A,C,T,G$ 四种字符的字符串。

第一行两个正整数 $n,m(1 \leq n \leq 10,1 \leq m \leq 2 \times 10^9)$。

接下来 $n$ 行字符串 $s_i(1 \leq |s_i| \leq 10)$ 表示潜在白学病的基因序列。 

输出一个整数，由于结果很大，请对 $998244353$ 取模。



### p28. Ranka with Whiteologist

有一个仅包含小写字母的字符串 $s$ (下标从 $1$ 开始)，你需要找到满足以下条件的严格上升序列 $p_1,p_2, \cdots p_k$ 的个数:

+ 对于每个 $i(1 \leq i \leq k)$ ，$s_{p_i}=a$ 。
+ 对于每个 $i(1 \leq i \lt k)$ ，存在 $j(p_i \lt j \lt p_{i+1})$ 满足 $s_j=b$ 。

一行一个字符串 $s(1 \leq |s| \leq 10^5)$ 。

输出一个整数，由于结果很大，请对 $10^9+7$ 取模。

对于样例 $1$ ，$5$ 个合法的序列分别为 $[1],[4],[5],[1,4],[1,5]$。

对于样例 $2$ ，$4$ 个合法的序列分别为 $[2],[3],[4],[5]$。

对于样例 $3$ ，$3$ 个合法的序列分别为 $[1],[3],[4]$。



### p29. Ranka with The Wall

接到了上级的通知，你需要立即糊一堵墙。

墙可以看做一个二维平面，宽 $n$ 格，从左往右第 $i$ 列的墙高 $a_i$ 格。

幸运的是，你拥有无限多的宽 $2$ 格高 $1$ 格的砖头，但很遗憾你不能旋转它，所以你只能水平地放置这些砖头。

一堵墙能被糊完当且仅当符合下列所有条件：

+ $1 - n$ 列的每堵墙都等高。
+ 墙中间没有缝隙。
+ 你摆放的砖头的左端点不能超过墙的最左端，右端点不能超过最右端。

在开工前，你需要先判断是否存在一种方案，能糊完这堵墙。

第一行一个正整数 $n(1 \leq n \leq 2 \times 10^5) $。

第二行 $n$ 个正整数 $a_i,a_2, \dots ,a_n(1 \leq a_i \leq 10^9)$。

如果存在方案，输出 "YES" ，否则输出 "NO"。

第一个样例中，你可以在 $[2,3]$ 放置一块砖头使得墙变成 $[2,2,2,2,5]$ 。然后再 $[1,2],[3,4]$ 分别放置两块使得墙变成 $[5,5,5,5,5]$ 。

第三个样例中，墙初始就是被糊完的。