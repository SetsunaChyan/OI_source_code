城哥给的期望难度： 

easy BEH 

easy-medium ACK 

medium GFLI 

hard DJ 



## A. AC challenge

类似于01背包计数。

哪家卖哪种气球并不重要，只要记录第 $i$ 种气球的个数是 $cnt_i$ 即可。

令 $dp_{i,j} $ 表示前 $i$ 种气球选 $j$ 个的答案。

那么有状态转移方程 $dp_{i,j}=dp_{i-1,j}+dp_{i-1,j-1}*cnt_i$ 。

可以滚动数组给空间降个维。



## B. Find the Nth Character

因为 $S_i$ 的长度为 $i$ ，所以枚举 $k$ 求满足 $\sum_{i=1}^k i=\frac{k * (k-1)}{2} \leq n$ 的最大 $k$。

那么 $n$ 就是 $S_k$ 的第 $n-\frac{k * (k-1)}{2}+1$ 个字符。



## C. City transportation 

由于是完全图，一定有个人能1花费到终点。

所以我们可以无视每个交通枢纽同时只能容纳一辆车的条件。

于是随便BFS一下求另外一个人的最短路就行了。



## D. Dec25==Oct31

如果取第 $k$ 行，那么第 $j$ 列的答案会减少 $k+j$ ，画个图看的就很清楚了。

维护以下两个东西，设 $A$ 为被取走的行数，$B=\sum k \ \text{(if k was removed)}$。

那么第 $j$ 列的答案就是 $\frac{(1+n) * n}{2}+(n-A) * j-B$ 。

行同理。



## E. Disjoint Intervals

假如有两个活动 $E_i$ 与 $E_j$ ，那么如果有结束时间 $e_i\leq e_j$ ，选择 $E_j$ 后的备选集合一定是选择 $E_i$ 后的子集。

所以贪心策略是选择每次选择结束时间最早的活动。



## F. Father Christmas and reindeer

考虑每次交换代价为 $1$ 的时候的做法。

比如数列 $1,3,5,2,4$ ：

- $1$ 在原来的位置，所以它不用动。
- $3$ 原来的位置是有 $5$ ，$5$ 原来的位置有 $4$ ，$4$ 原来的位置有 $2$ ，$2$ 原来的位置有 $3$ 。我们称之为一个循环，设 $l=4$ 为这个循环的长度，那么我们只需要交换 $l-1$ 次就行了。
- 总的答案就是 $\sum l_i-1$ ，$l_i$ 是第 $i$ 个循环的长度。

可以证明这样一定是最优的，证明就略了~



再考虑每次代价为 $x+y$ 的时候的做法。

每次只在循环内转一圈的最小代价是 $A_i=min_i * (l_i-2)+sum_i$ ，其中 $min_i$ 是这个循环内的最小数，$sum_i$ 是这个循环内所有数的和。

那么答案是 $\sum A_i$ 吗，不完全是。 (Hacked by LST)

考虑数列 $1,500,100,200,300,400$ 。

虽然 $1$ 在后面的那个循环外，但 $1$ 比 $min_i=100$ 要小得多，我们把 $1$ 和 $min_i$ 交换位置，现在 $min_i=1$ 了，然后拿这个 $min_i$ 去完成整个循环的位置调换，再把 $1$ 和 $100$ 换回去。设 $minX$ 是整个数列中的最小值，那么代价是 $B_i=min_i + sum_i +(l_i+1) * minX$ 。

当然并不是任何时候有 $B_i < A_i$ ，所以最终答案是 $\sum min(A_i,B_i)$ 。



 ## G. Geometric designs

Not solved.





## H. Mostly Pairing Prime

枚举。



## I. Count the Total Ranking Numbers

设 $F_i$ 是 $i$ 个同学的最终名次的可能性的个数。

显然 $F_0=1$ ，然后我们开始考虑递推式。

第 $i$ 位可以是单独一个人，也可以是和从 $j$ 开始的 $i-j+1$ 个人并列，当然我们把前者看做一个人并列，那么有 

$$F_i = \sum_{j=1}^{i} C_{n-j+1}^{i-j+1} * F_{j-1}$$

可以随便预处理一下所有的组合数，然后就可以愉快的递推了。



## J. Jelly Belly

假如第一个人的所有字符都大于等于第二个人的，那么第一个人把他最大的插在最靠后的位置，否则就最小的插在最前面。



## K. QQ and WeChat

Not solved.



## L.Bash Game

一道巴什博弈变形。

假设 $P-1=M+1$ ，很显然第一个人必败。

可以推广到 $P-1=k*(M+1)$ 时，后手总有办法维持 $P-1=(k-1)*(M+1)$ 或 $P-1=(k-2)*(M+1)$。

那么当 $(P-1)\%(M+1)==0$ 时先手必败，否则先手必胜。