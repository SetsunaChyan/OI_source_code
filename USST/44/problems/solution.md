<p align="center"><font face="华文中宋" size=5>usstsiw第四十四次热身赛题解报告</font></p>

这次不小心出成了数据结构~~凉宫春日~~专场，不知道大家做得是否开心呢。总之，题目难度仅略高于板子题，应该都是能补出来的吧，希望大家补完之后都能解锁新技能。



<font face="华文行楷">A题题解（难度：☆）</font>

<font face="微软雅黑">First solved: TREE（3）, 00:15 (+).</font>

暴力搜。将 $x$ 所有的操作可能性存放在数组 $x$ 中，将 $y$ 所有的操作可能性存放在数组 $y$ 中，然后两个for循环进行排列组合，如果能得到指定数 $t$ 就输出“YES”，否则输出“NO”。<font color=red>**（注意0的存在）**</font>



<font face="华文行楷">B题题解（难度：☆☆☆）</font>

<font face="微软雅黑">First solved: 立直一发AC, 00:45 (+3).</font>

很容易看到其实只要维护能量球的集合 $S$ 就行；如果放入一颗新的圆球 $i$ ，首先看一下能量球集合$S$ 里面是否有圆球 $j$ 会让这颗圆球 $i$ 不符合能量球的定义，如果没有，则将这颗圆球 $i$ 放入能量球集合 $S$ 里面，但要注意到这颗圆球 $i$ 的插入可能会把其它原来集合里面的能量球踢出集合。所以要求这个集合要能支持快速查询和修改操作，而<font color=red>**multiset**</font>恰好能能满足这个需要。



<font face="华文行楷"> C题题解（难度：☆☆）</font>

<font face="微软雅黑">First solved: 减肥不能只喝喜茶, 01:26 (+2).</font>

这题和 $D$ 题是从 $UVA-1455$ 拆成两题的。

只需要在完成并查集基本操作的情况下额外维护一个类似于 $rank$ 的东西。

合并 $x$ 与 $y$ 时，顺便把 $rank$ 也求个和。摧毁某战舰时，$rank-1$ 就行了。



<font face="华文行楷"> D题题解（难度：☆☆☆）</font>

<font face="微软雅黑">First solved: 我佛了, 01:48 (+1).</font>

这题出数据的时候手抖把 $1e5$ 打成了 $1e4$ ，导致好几个队 $O(n)$ 的查询都给过了。在这里给大力敲线段树的队伍道个歉QAQ。(OJ上的数据加强过了，你是水不过去的~)

如果画上线段 $(x_1,y_1)-(x_2,y_2)$ ，对于操作 $2$ ，区间 $[x_1,x_2]$ 的答案都加了 $1$ ；对于操作 $3$ ，区间 $[y_1,y_2]$ 的答案都加了 $1$。（这里默认 $x_1 \leq x_2 , y_1 \leq y_2$，实际写的时候需要比个大小）

对于删除操作，可以拿栈存一下，然后对栈顶操作对应的区间减 $1$。

于是你只要写一个支持区间加减，单点查询的数据结构分别维护操作 $2$ 和操作 $3$ 的答案就行了。

代码比较短的做法是用树状数组维护差分的前缀和，当然也可以线段树大力搞啦。



<font face="华文行楷"> E题题解（难度：0）</font>

<font face="微软雅黑">First solved: 我佛了, 00:24 (+).</font>

白给，主要考阅读能力和手速。



<font face="华文行楷">F题题解（难度：☆☆☆）</font>

![bzoj](F:\CPP\OI\CF_RJY_LYD\USST\44\problems\bzoj.jpg)

灵感来自2019NOI神选十二省联考Day1 T1。

题目的意思是写一个支持查询固定区间 $k$ 小异或值的数据结构，会 $trie$ 就很简单了。

先考虑怎样求最小的，只要把 $n$ 个数从高位到低位插入 $trie$ ，找 $x$ 的最小异或的时候贪心地选与 $x$ 对应位相同的那个儿子走就行了。

再考虑求 $k$ 小，建 $trie$ 的时候记 $cnt_q$ 为经过结点 $q$ 的串的个数。设 $x$ 的最高位是 $p$ ，当前结点的 $p$ 儿子是 $a$。如果 $cnt_a \geq k$ ，就到 $p$ 儿子里去找第 $k$ 小，反之就到 $(1 \bigoplus p)$ 儿子里去找第 $k-cnt_a$ 小，这样一直找到底就是答案啦。



<font face="华文行楷"> G题题解 （难度：☆）</font>

<font face="微软雅黑">First solved: 减肥不能只喝喜茶, 00:36 (+).</font>

多了一个维度的01背包。

状态转移方程写出来是 $dp_{i,j,k}=max \{ dp_{i-1,j,k},dp_{i-1,j-1,k-a_i}+b_i \}$ 。

然后照样可以滚动数组滚掉 $i$ 这一维。



<font face="华文行楷"> H题题解（难度：☆☆☆）</font>

没人动的题。

设 $D(i,j)$ 是 $i$ 结点与 $j$ 结点的树上距离，答案显然是 $2 * \mathop {\min }\limits_{1 \leq i \leq n} \{ \sum_{j=1}^n D(i,j) \}$，也就是求树的重心。

(事实上树的重心和边权无关QAQ)

这是一道树形 $dp$，如果你 $Floyd$ 或者做 $n$ 次 $dfs$ ，那你就 $TLE$ 飞了。

不妨先把 $1$ 看做根，$dfs$ 一遍求出以 $1$ 为根时，所有结点的子树大小 $cnt_i$ 和选 $1$ 为仓库时的答案 $dp_1$ 。

再做一次 $dfs$ 开始换根，考虑把根 $x$ 换为根 $y$ 时答案的变化，所有 $y$ 子树上的结点对答案的贡献都会减少 $D(x,y)$，除去 $y$ 子树上的结点的贡献都会增加 $D(x,y)$ 。

所以 $dp_y=dp_x+(n-cnt_y)*D(x,y)-cnt_y*D(x,y)=dp_x+(n-2*cnt_y)*D(x,y)$ ，更新答案就完事啦。



<font face="华文行楷"> I题题解（难度：☆☆☆☆☆☆☆☆）</font>

<font face="微软雅黑">First solved: 我佛了, 02:49 (+20).</font>

恭喜女队绝杀。

答案是 $FFFTTTFT$ 

1. $(35/36)^{24} \gt 50\%$ ，所以出现的概率 $ \lt 50 \%$ 。

2. 间隔不均等的时候，你更有可能出现在大间隔里面，比如 $1$ 分钟内来了 $5$ 辆车，下一辆到$60$ 分钟才来，等待时间显然 $ \gt 5$ 分钟。

3. 先手总是会把正方形的巧克力掰成长方形，后手只要掰回正方形，就能最终把 $1*1$ 的局面甩给先手。

4. 将第 $10/20/30/40/50$ 张视为特殊的牌，每次操作中有且仅有一张特殊牌被翻面，输的局面是所有牌为背面，这 $5$ 张牌每张被翻了奇数次才会是背面，总体经过奇数轮后达到败的局面，所以先手随便怎么玩都是赢的。

5. 先任选两堆 $49$ 枚硬币放上天平，如果平衡，则表示假币在剩余 $2$ 枚中，$98$ 枚都是真的。将手头两枚一真一假的和两枚确定的真币称一下即可。如果不平衡，表示手头 $2$ 枚是真的，取出较轻一侧的 $49$ 枚硬币，加入一枚真币变成 $50$ 枚，然后均分成两堆称重，如果平衡了，表示假币在较重的那 $49$ 枚里，可证明假币偏重。如果不平衡，表示假币就在偏轻的那 $49$枚中，可证明假币偏轻。

6. 一个椭圆的几何定义是，到两个定点距离之和相同的点的轨迹。如果从一个焦点击球，会经过另一个焦点。如果从焦点连线上击球，则不管怎么反弹都会经过焦点连线，因此可以构造类似下图的形状。

    ![I_6](F:\CPP\OI\CF_RJY_LYD\USST\44\problems\I_6.jpg)

7. $3/4/6$ 的正确性是显然的，$5$ 有类似下图的几种构造形可以转化成六边形，而 $7$ 及以上不能密铺。

![I_7](F:\CPP\OI\CF_RJY_LYD\USST\44\problems\I_7.png)

8. $2+2*(2+9)$

   $9+9*10/6$

   $(7*7-1)/2$

   $3*(4-6+10)$

   $(10-8)*8+8$

   $6*8/(10-8)$

   $10+10/5*7$

   $(1+10)*3-9$


