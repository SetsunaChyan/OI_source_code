#include <cstdio>

typedef unsigned long long ull;
const int upper=12550;
ull f[upper];

int loop[3128]={2,2,4,9,7,21,25,17,13,25,61,11,25,29,49,41,25,37,25,19,61,17,31,49,25,101,85,73,49,15,121,31,49,41,37,81,25,77,19,57,61,41,49,89,31,121,49,33,25,113,301,73,85,109,73,21,49,73,43,59,121,61,31,49,97,141,121,137,37,49,241,71,25,149,229,201,19,81,169,79,121,217,121,169,49,181,265,57,61,45,121,113,49,121,97,181,49,197,337,121,301,51,73,209,85,81,109,73,73,109,61,153,49,77,73,241,43,169,175,145,121,111,61,41,31,501,49,257,193,89,421,131,121,145,409,361,37,277,49,47,241,33,211,141,25,141,445,113,229,149,601,51,37,73,241,61,169,317,79,217,241,49,217,329,121,41,169,337,49,365,181,73,265,349,169,401,121,233,133,179,121,91,337,121,49,381,121,181,97,145,181,191,97,389,589,281,337,397,121,23,301,137,151,113,73,41,625,49,169,91,241,43,109,281,73,441,73,241,109,297,61,253,457,449,49,601,229,457,73,115,241,81,85,53,169,161,175,313,145,239,121,241,331,649,61,561,121,253,61,169,1501,251,49,241,769,361,385,517,265,305,421,169,391,177,121,541,145,89,409,269,361,271,73,113,277,101,49,557,139,121,241,57,97,569,211,361,421,81,49,613,421,393,445,589,337,581,229,361,445,337,601,177,151,201,73,61,73,89,241,209,61,311,169,629,949,241,79,637,217,71,481,73,49,37,217,701,985,217,121,33,121,111,169,457,337,681,49,677,1093,153,181,31,73,785,265,241,349,233,169,175,1201,505,241,237,697,141,133,145,535,359,121,343,91,441,337,741,121,737,49,121,1141,433,121,749,181,1001,97,29,145,379,181,257,571,769,193,81,1165,265,589,389,841,145,337,521,397,781,121,797,67,145,601,201,409,421,151,1081,337,381,73,409,121,553,625,465,49,841,337,185,91,419,241,85,43,97,109,901,841,241,73,281,1321,431,73,869,241,281,109,145,889,439,61,337,253,889,457,221,1345,297,97,449,601,41,229,201,457,561,73,917,115,73,241,47,241,929,169,121,157,937,169,273,481,633,349,441,313,901,145,217,715,479,241,533,241,49,331,981,649,977,61,329,1681,491,121,253,253,121,121,561,169,499,1501,337,751,1009,49,101,241,729,769,255,361,593,769,73,517,1041,265,161,913,697,421,27,169,1049,391,401,529,181,121,1105,541,697,145,281,265,361,409,713,805,561,361,91,271,361,145,541,337,1097,277,121,301,127,49,625,1669,761,139,125,121,617,241,361,169,377,97,381,1705,433,421,569,361,571,421,761,241,1201,97,1157,613,777,421,337,1177,541,445,841,589,1177,337,91,1741,793,457,1189,361,721,445,89,337,599,601,601,529,409,151,221,601,1217,145,113,61,225,73,1229,265,41,241,1237,625,207,61,145,931,177,169,2501,1885,361,949,685,241,631,157,169,637,1281,217,113,211,841,961,641,73,1289,49,441,37,1297,217,291,2101,241,985,1309,217,261,121,889,97,659,121,221,331,505,169,721,457,337,337,449,2041,61,49,1349,2029,1801,1093,453,457,785,181,457,31,1369,73,1381,2353,457,265,757,241,139,349,241,697,461,169,361,175,105,1201,701,505,685,481,161,709,401,697,119,421,313,133,241,145,141,535,953,1075,719,121,209,343,241,91,701,1321,1457,337,1945,2221,793,121,1469,2209,561,49,681,121,739,1141,505,433,497,121,741,2245,169,181,145,3001,751,97,1001,85,101,145,1517,379,241,181,381,769,433,571,361,769,813,385,193,241,1033,1165,1549,265,301,589,305,1165,361,841,71,145,505,337,1581,1561,1577,397,177,781,305,121,421,2389,1081,67,229,145,289,1201,265,601,741,409,241,421,537,301,203,1081,271,337,1081,1141,1641,73,793,409,337,121,821,553,1649,625,201,1393,1657,49,277,841,1113,673,1009,553,1681,91,361,1255,839,241,407,85,57,43,1821,97,881,217,569,901,913,841,1709,241,361,73,1717,841,79,1321,81,1291,1729,145,1741,2605,1225,241,391,841,953,109,1177,145,2001,889,1757,439,1177,121,177,337,1769,253,1161,889,1777,457,257,661,1081,1345,289,889,1781,193,337,1345,211,601,109,121,177,229,181,601,1817,457,601,1681,71,73,841,2749,121,115,1041,73,103,241,89,139,141,241,1901,2785,625,337,929,121,1009,157,1241,937,181,169,1877,817,1257,481,471,1897,241,697,721,1321,1897,313,1037,901,1273,145,213,217,381,715,281,1435,1105,481,931,1597,73,241,1941,49,177,661,73,2941,971,649,369,2929,1401,121,653,985,221,1681,217,1471,1969,121,1981,253,33,253,529,121,199,241,441,1681,221,169,1997,499,1369,1501,561,337,1045,751,681,1009,109,49,127,301,1353,241,2029,2185,561,769,457,763,1019,361,511,1777,121,1537,201,73,1093,517,785,3121,207,265,2069,481,241,913,181,697,1039,841,233,79,593,169,181,3145,697,781,263,1201,1051,529,1513,181,421,241,401,1105,473,541,531,697,2129,145,281,841,981,265,357,361,145,409,533,2137,2201,805,1433,1681,169,361,97,91,1369,271,241,361,129,289,1321,541,1091,337,2189,3289,1481,277,733,121,1265,301,737,127,97,49,1261,625,361,1669,555,2281,51,277,433,373,2241,121,2237,1849,1497,241,523,361,2249,169,3001,1129,337,97,1129,1141,57,1705,1041,433,2281,841,1513,1705,1225,361,657,571,769,421,1141,2281,1141,241,769,1201,231,193,2309,3469,81,613,309,2329,181,421,793,337,2329,1177,261,541,777,889,337,841,1171,589,145,1177,801,337,361,91,1561,1741,1181,793,1457,913,1561,1189,2377,361,281,721,1593,445,2389,265,2381,337,145,1795,541,601,1201,601,201,529,241,409,1261,301,841,661,1393,601,2429,3649,3241,289,813,337,433,61,761,673,817,73,2801,3685,409,265,615,121,411,241,553,1237,1261,625,2477,619,465,61,1333,145,381,931,841,529,617,337,625,7501,553,1885,1425,361,501,949,1673,685,1259,241,197,631,169,313,241,169,721,637,289,3841,121,217,1225,337,1801,211,853,841,427,1921,241,1921,2569,73,2581,3865,841,49,323,1321,431,37,1721,1297,1521,217,2597,871,1737,2101,1301,241,2609,985,841,1309,873,217,721,781,145,241,701,889,881,97,1753,1975,1319,121,1321,661,1009,331,2701,505,2657,169,889,721,1211,457,1321,337,441,337,1521,1345,1457,2041,889,61,469,97,1341,4045,449,2029,631,1801,1553,1093,41,1357,541,457,1393,2353,601,361,681,457,225,31,561,1369,2737,73,2813,1381,1833,2353,2749,457,501,529,217,757,1585,241,461,139,185,349,2781,241,1333,697,929,1381,505,169,177,361,121,175,1281,313,1399,1201,937,2101,241,505,281,685,273,961,705,481,505,709,1897,1201,2841,697,757,355,441,421,113,313,2849,265,1801,241,169,145,1429,421,217,1069,2869,2857,81,1075,1913,2155,1439,241,131,625,1065,343,3061,241,2897,181,49,2101,1451,1321,2909,4369,1961,337,481,1945,1459,2221,977,793,721,121,2941,4405,985,2209,533,1681,491,97,1961,2041,2901,121,337,739,505,1141,1481,505,425,433,361,1489,2977,121,1489,2221,561,2245,2989,169,1681,181,1993,145,1499,3001,235,751,337,97,881,3001,1381,85,1009,301,303,145,397,4549,201,379,761,241,1681,361,2185,1141,1017,769,301,433,1017,1141,231,361,1531,769,593,2437,441,769,757,193,217,241,817,1033,3089,1165,1041,1549,1009,265,775,301,161,1177,1037,913,621,1165,697,361,1559,841,449,211,105,145,3141,505,3137,337,1049,4741,1571,1561,1541,4729,1201,397,505,529,527,781,361,913,3169,121,3181,421,1105,2389,913,1081,1673,133,2089,229,141,145,69,289,281,2401,161,265,913,601,361,2221,3217,409,1609,241,2137,421,3229,1609,181,601,561,607,1619,1081,811,271,361,337,3501,1081,3257,1141,361,4921,209,145,1681,793,1081,409,3277,337,741,121,1097,2461,541,553,161,4945,361,625,1765,601,1793,1393,505,1657,221,49,3317,277,625,841,51,3337,3329,1345,2281,1009,3337,553,835,1681,249,181,1905,361,3401,1255,617,2515,1777,241,1641,1219,361,85,3381,169,241,85,377,5461,397,97,3389,2641,761,433,3397,1705,567,901,1297,913,1821,841,61,5125,569,241,855,361,407,73,2281,1717,3921,841,901,79,2281,1321,431,241,3449,1291,1201,1729,1581,289,1009,1741,2313,2605,1157,1225,1161,241,2329,391,609,841,871,2857,337,217,1741,1177,3497,145,1081,6001,1873,889,3509,5269,2521,439,2001,1177,1759,241,1177,529,441,337,1181,5305,361,253,421,3481,241,889,793,1777,701,457,3557,769,2377,661,1933,1081,3569,1345,721,289,3577,889,895,5341,265,385,1641,337,3581,1345,2393,211,2065,601,1801,109,601,121,3421,529,645,457,1225,181,1811,601,2129,5449,441,457,625,601,73,1681,1217,211,1217,145,3701,841,337,2749,871,121,1831,229,225,3121,3681,73,1681,103,2457,241,177,265,1765,139,121,421,3697,241,3785,5701,2473,2785,109,625,2161,673,825,2785,1821,121,931,1009,433,157,3741,3721,3737,937,177,181,375,169,3749,5629,5001,817,1253,3769,1879,481,361,1411,1073,1897,141,241,1369,1393,1889,721,61,1321,2521,1897,3781,313,2161,3109,169,901,1901,1273,1741,145,1281,637,3817,217,337,1141,113,1429,1277,841,3841,1435,2521,1105,451,961,685,931,641,1597,401,73,161,241,1289,5821,1931,49,3869,529,1321,1321,1037,73,2225,2941,1297,2911,953,649,1941,1105,1161,2929,1949,4201,391,241,241,1957,721,985,1873,661,2617,1681,2053,217,701,1471,521,1969,113,121,891,1981,2665,253,1317,97,3901,253,2633,529,1979,121,1137,199,441,481,3981,1321,3977,1681,505,661,91,169,3989,5989,721,499,3997,1369,667,3001,337,1681,4009,337,201,1045,1345,1501,561,2041,2011,1009,121,109,421,49,4037,127,2697,301,353,4057,2449,241,5401,2029,1353,2185,1015,1681,905,769,73,457,381,763,785,3055,2039,361,2213,511,457,1777,2041,121,529,3073,1369,601,2353,73,4109,1093,2761,517,1981,2353,71,3121,457,619,4129,265,2321,6205,1513,481,1035,241,109,913,553,181,4201,697,2041,1039,721,1681,131,697,4169,79,921,1777,4177,169,1045,181,361,3145,337,697,4181,1561,313,787,2099,1201,191,1051,1401,529,421,1513,1233,181,1369,421,2111,481,4229,1201,481,1105,1037,1417,2297,541,401,1591,1941,697,4501,6385,473,145,2129,841,2131,841,937,2941,241,265,4277,1069,241,361,2141,145,4289,817,281,1597,685,2137,177,6601,2857,805,4309,4297,861,1681,2873,169,2305,361,81,97,209,91,4341,1369,1981,541,241,241,337,361,1081,385,1401,577,2481,1321,199,541,1457,3271,2205,337,721,6565,5833,3289,111,4441,2513,553,793,733,4381,121,4733,3793,2937,301,211,2209,4409,127,1681,97,65,49,1505,1261,681,625,4429,361,4441,1669,2953,1663,2545,2281,149,151,505,553,1101,433,2341,373,497,6721,2353,121,561,6709,1481,1849,1493,4489,747,481,505,523,1497,361,2241,6745,145,169,2437,3001,751,1129,3001,337,41,97,1141,1129,3001,1141,145,169,2221,1705,201,3121,1513,433,325,2281,3033,1681,4549,1513,2801,1705,241,1225,2377,361,761,1969,761,571,4581,769,4577,841,433,1141,547,2281,4589,1141,361,241,4597,769,991,1201,1625,691,225,385,461,6925,193,3469,2309,241,2311,613,1033,925,4641,2329,881,181,3097,841,211,793,1201,337,601,2329,2493,1177,829,781,913,541,1557,2329,4681,1777,361,337,2339,841,2341,1171,281,589,1361,145,4697,1177,1513,2401,2351,337,1261,361,3161,91,4717,1561,2705,1741,1577,3541,829,793,441,4369,529,1825,625,1561,791,1189,305,2377,4501,361,4757,841,841,721,2381,4777,4769,889,1081,2389,241,265,399,7141,457,337,4789,145,4781,1795,289,541,2399,1201,5489,1201,793,601,2661,601,169,529,1481,241,2411,409,2305,1261,241,601,125,841,1161,661,1609,1393,4849,601,4901,7285,809,3649,465,3241,1261,577,1081,2437,4881,337,4877,433,1081,61,1221,2281,1393,673,1641,817,1633,73,391,8401,793,3685,2241,409,981,265,1009,1843,2459,121,145,1231,1641,241,1261,553,4937,1237,1649,1261,945,625,4949,7429,601,619,4957,1393,2585,121,1657,1333,2661,145,561,1141,553,1861,1171,841,865,529,3337,1849,4981,673,2281,625,1009,7501,121,553,5009,1885,1681,4273,433,361,2717,1501,1081,1897,2865,5017,5041,685,3353,3775,571,241,121,589,1625,631,101,169,2737,625,169,241,2531,169,1333,721,3641,637,2553,289,2539,3841,881,121,5089,217,2541,1225,1705,337,2549,1801,2551,421,913,853,2961,841,5117,427,3417,3841,2773,241,261,1921,361,2569,901,73,737,2581,3433,3865,841,841,5201,49,313,967,2579,1321,309,1291,241,37,161,5161,309,1297,1729,4561,519,433,5189,7789,3481,871,3025,5209,913,2101,1225,3901,829,241,261,7825,1561,985,2609,841,2993,1309,953,2617,5241,217,5237,721,3529,781,1311,145,1321,481,2001,2101,2661,889,1191,2641,3513,97,5269,1753,181,1975,1177,3955,113,121,415,1321,177,661,5521,1009,5297,661,1769,2701,241,505,3025,7969,3481,337,5317,889,887,721,1777,3631,1777,457,281,1321,257,337,2845,1321,2671,337,3241,4561,1801,1345,5357,4369,289,2041,769,889,5369,61,3561,469,1793,193,897,4021,337,4045,5389,1345,561,2029,841,631,2699,1801,2813,4657,217,2185,181,121,5417,1357,529,541,2711,457,5429,1393,361,2353,1261,601,2719,721,1817,2041,1553,457,2701,673,1801,61,683,1681,391,1369,281,2737,5481,73,145,8437,841,1381,2741,5497,85,2353,121,2749,681,457,917,1501,1041,1057,1837,217,1261,757,409,1585,661,241,251,1381,265,139,3121,553,5537,697,281,8341,2953,241,929,1333,3801,697,1853,2785,3185,1381,1873,505,2641,337,621,529,929,361,165,121,2791,349,1009,3841,3081,313,5597,1399,3721,1201,1401,937,5609,2101,361,241,401,505,5725,841,3753,685,197,817,1881,1921,3769,2113,2819,481,1681,505,1881,709,1901,1897,2581,1201,241,8521,1333,697,5669,757,2161,355,5677,1321,1009,421,1897,337,5689,313,2841,8545,2073,529,1521,1801,2851,241,1273,169,1141,145,5717,1429,425,421,1431,217,817,2137,761,2869,481,2857,451,241,841,2149,3277,5737,6001,2155,1105,4315,2879,481,1497,391,3721,625,5781,3193,5777,685,73,3061,3249,241,881,8689,3881,361,5797,49,449,2101,177,4351,5809,1321,1681,8725,73,4369,2909,5881,281,337,3881,481,541,1945,5837,1459,369,2221,769,2929,2965,793,4201,721,5857,121,351,2941,1305,4405,3345,985,5881,2209,441,1597,2939,1681,1045,1471,217,193,181,5881,337,2041,1969,8701,3193,121,5909,337,3961,739,5917,505,1341,2281,97,4441,5929,505,5941,1273,529,433,425,361,2971,1489,793,2977,3601,241,1597,1489,1321,2221,271,1681,2845,2245,441,2989,1457,169,1681,1681,3993,361,1481,1993,5981,145,4105,4495,2999,3001,101,235,561,751,601,337,2941,97,2089,2641,3011,3001,3121,1381,2041,85,3441,1009,3019,301,217,907,865,145,1101,397,505,4549,365,601,3473,757,4057,2281,6081,241,6077,1681,4057,721,161,2185,3205,1141,561,3049,2781,769,763,301,1369,433,3081,3049,1121,2281,4073,691,145,361,3061,1531,2041,769,6141,1777,6137,2437,121,1321,3193,1537,3505,757,201,193,181,217,163,241,2185,817,6169,1033,6181,9265,2353,2329,1545,3121,281,1549,825,1009,2061,265,2953,775,4137,301,1777,481,505,2353,721,3109,477,913,3109,1861,361,1165,2841,697,881,361,4153,4675,3119,841,521,1345,697,211,12501,313,3133};

inline ull fp(ull a,ull b,int c)
{
    ull base=a,ret=1;
    while(b)
    {
        if(b&1) ret=(ret*base)%c;
        base=(base*base)%c;
        b>>=1;
    }
    return ret;
}

int main()
{
    //freopen("data.out","w",stdout);
    int _;
    scanf("%d",&_);
    while(_--)
    {
        ull a,b;
        int n,k;
        scanf("%llu%llu%d",&a,&b,&n);
        f[0]=0;f[1]=1%n;
        for(int i=2;i<=loop[n];i++)
            f[i]=(f[i-1]+f[i-2])%n;
        k=loop[n]-1;
        printf("%d\n",f[fp(a%k,b,k)]);
    }
    return 0;
}
